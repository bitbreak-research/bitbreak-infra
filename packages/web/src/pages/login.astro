---
import AuthLayout from "../layouts/AuthLayout.astro";
import { LoginForm } from "../features/auth";
import { checkAuth } from "../lib/utils/server-auth";

export const prerender = false;

// Redirect to /workers if already authenticated
const { isAuthenticated } = await checkAuth(Astro.cookies);

if (isAuthenticated) {
  return Astro.redirect("/workers");
}
---

<AuthLayout title="Sign In">
  <div class="space-y-8">
    <div class="text-center">
      <h1 class="text-lg font-medium">Sign In</h1>
    </div>
    
    <LoginForm client:load />
  </div>
</AuthLayout>

