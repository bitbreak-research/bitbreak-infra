---
import DashboardLayout from "../../layouts/DashboardLayout.astro";
import { CreateWorkerForm } from "../../features/workers";
import AuthGuard from "../../features/auth/components/AuthGuard";

export const prerender = false;
---

<DashboardLayout title="Add Machine" currentPath="/workers">
  <AuthGuard client:load>
    <div style="max-width: 480px;">
      <!-- Back link -->
      <a href="/workers" class="inline-flex items-center gap-2 text-sm text-[var(--color-gray-500)] hover:text-[var(--color-gray-900)] mb-6 transition-colors">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back to Machines
      </a>

      <div class="bg-white rounded-[var(--radius-lg)] border border-[var(--color-gray-200)] p-8">
        <div class="mb-8 text-center">
          <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-[var(--color-gray-100)] flex items-center justify-center">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-[var(--color-gray-600)]">
              <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
              <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
              <line x1="6" y1="6" x2="6.01" y2="6"></line>
              <line x1="6" y1="18" x2="6.01" y2="18"></line>
            </svg>
          </div>
          <h1 class="text-xl font-semibold text-[var(--color-gray-900)]">Add New Machine</h1>
          <p class="text-sm text-[var(--color-gray-500)] mt-2">
            Configure a new Mac Mini worker to start generating wallets
          </p>
        </div>
        
        <CreateWorkerForm client:load />
      </div>
    </div>
  </AuthGuard>
</DashboardLayout>

